<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>tdcq&#39;Blog • Posts by &#34;docker&#34; tag</title>
        <link>http://example.com</link>
        <description>记录自己技术博文</description>
        <language>zh-CN</language>
        <pubDate>Fri, 02 Apr 2021 16:03:02 +0800</pubDate>
        <lastBuildDate>Fri, 02 Apr 2021 16:03:02 +0800</lastBuildDate>
        <category>java</category>
        <category>docker</category>
        <category>contos</category>
        <item>
            <guid isPermalink="true">http://example.com/2021/04/02/centos%E5%AE%89%E8%A3%85Docker/</guid>
            <title>基于CentOS7安装Docker</title>
            <link>http://example.com/2021/04/02/centos%E5%AE%89%E8%A3%85Docker/</link>
            <category>docker</category>
            <pubDate>Fri, 02 Apr 2021 16:03:02 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;docker安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#docker安装&#34;&gt;#&lt;/a&gt; Docker 安装&lt;/h2&gt;
&lt;p&gt;Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux 或 Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;下面以 centos7 服务器为例&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;下载安装&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight livecodeserver&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs livecodeserver&#34;&gt;curl -fsSL &lt;span class=&#34;hljs-keyword&#34;&gt;https&lt;/span&gt;://&lt;span class=&#34;hljs-built_in&#34;&gt;get&lt;/span&gt;.docker.com | bash -s docker &lt;span class=&#34;hljs-comment&#34;&gt;--mirror Aliyun&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;启动 docker&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight crmsh&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs crmsh&#34;&gt;service docker &lt;span class=&#34;hljs-literal&#34;&gt;start&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;查看安装信息&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight nginx&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs nginx&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;hljs-literal&#34;&gt;info&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;配置镜像加速器&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;您可以通过修改 daemon 配置文件 /etc/docker/daemon.json 来使用加速器，下面地址为自己申请的阿里云镜像仓库地址&lt;/p&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;vim &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;docker/daemon.json&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs json&#34;&gt;&amp;#123;&lt;br&gt;  &lt;span class=&#34;hljs-attr&#34;&gt;&amp;quot;registry-mirrors&amp;quot;&lt;/span&gt;: [&lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;https://6khlzwla.mirror.aliyuncs.com&amp;quot;&lt;/span&gt;]&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;重启 dcoker&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight ebnf&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs ebnf&#34;&gt;&lt;span class=&#34;hljs-attribute&#34;&gt;service docker restart&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;设置开机自启动&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight routeros&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs routeros&#34;&gt;systemctl &lt;span class=&#34;hljs-builtin-name&#34;&gt;enable&lt;/span&gt; docker&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;设置时间与时区&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight arcade&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs arcade&#34;&gt;echo &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;Asia/Shanghai&amp;#x27;&lt;/span&gt; &amp;gt; &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;timezone&lt;br&gt;&lt;br&gt;echo &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;Asia/Shanghai&amp;#x27;&lt;/span&gt; &amp;gt; &lt;span class=&#34;hljs-regexp&#34;&gt;/etc/&lt;/span&gt;timezone/timezone&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;宿主机时间修改为上海时间&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight awk&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs awk&#34;&gt;cp -rf &lt;span class=&#34;hljs-regexp&#34;&gt;/usr/&lt;/span&gt;share&lt;span class=&#34;hljs-regexp&#34;&gt;/zoneinfo/&lt;/span&gt;Asia&lt;span class=&#34;hljs-regexp&#34;&gt;/Shanghai /&lt;/span&gt;etc/localtime&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;docler 常用命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight vala&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;hljs vala&#34;&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 重启docker&lt;/span&gt;&lt;br&gt;docker restart 容器名称&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 删除docker容器&lt;/span&gt;&lt;br&gt;docker container rm  &amp;lt;container ID&amp;gt;&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 查看镜像&lt;/span&gt;&lt;br&gt;docker images&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 查看镜像容器&lt;/span&gt;&lt;br&gt;docker ps&lt;br&gt;docker ps -a&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 搜索镜像&lt;/span&gt;&lt;br&gt;docker search xxx&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 查看日志&lt;/span&gt;&lt;br&gt;docker log -f 容器启动后生成唯一ID&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 清理镜像&lt;/span&gt;&lt;br&gt;docker images|grep none|awk &lt;span class=&#34;hljs-string&#34;&gt;&amp;#x27;&amp;#123;print $3&amp;#125;&amp;#x27;&lt;/span&gt;|xargs docker rmi&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 进入容器&lt;/span&gt;&lt;br&gt;docker exec -it 容器id bash&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;## 清理内存&lt;/span&gt;&lt;br&gt;echo &lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt; &amp;gt; /proc/sys/vm/drop_caches&lt;br&gt;&lt;br&gt;&lt;span class=&#34;hljs-meta&#34;&gt;# 文件拷贝&lt;/span&gt;&lt;br&gt;docker cp 目录 容器名:目录&lt;br&gt;docker cp 容器名:目录 目录&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
    </channel>
</rss>
